[
    {
        "name": "discover - ok",
        "service": {
            "name": "cloudstate.EntityDiscovery",
            "method": "cloudstate.EntityDiscovery/discover",
            "proto": "cloudstate/entity.proto"
        },
        "seq": [
            {
                "req": {
                    "msg": {
                        "protocolMajorVersion": 0,
                        "protocolMinorVersion": 0,
                        "proxyName": "TCK",
                        "proxyVersion": "1.1.0",
                        "supportedEntityTypes": [
                            "cloudstate.eventsourced.EventSourced"
                        ]
                    }
                },
                "resp": {
                    "msg": {
                        "entities": [
                            {
                                "entityType": "cloudstate.eventsourced.EventSourced",
                                "serviceName": "com.example.shoppingcart.ShoppingCart",
                                "persistenceId": "ShoppingCart"
                            }
                        ],
                        "serviceInfo": {
                            "serviceName": "shopping-cart",
                            "serviceVersion": "0.1.0",
                            "serviceRuntime": "go1.14.2 darwin/amd64",
                            "supportLibraryName": "cloudstate-go-support",
                            "supportLibraryVersion": "0.2.0"
                        }
                    }
                }
            }
        ]
    },
    {
        "name": "discover - not ok",
        "service": {
            "name": "cloudstate.EntityDiscovery",
            "method": "cloudstate.EntityDiscovery/discover",
            "proto": "cloudstate/entity.proto"
        },
        "seq": [
            {
                "req": {
                    "msg": {
                        "protocolMajorVersion": 0,
                        "protocolMinorVersion": 0,
                        "proxyName": "TCK2",
                        "proxyVersion": "1.1.0",
                        "supportedEntityTypes": [
                            "cloudstate.eventsourced.EventSourced"
                        ]
                    }
                },
                "resp": {
                    "msg": {
                        "entities": [
                            {
                                "entityType": "cloudstate.eventsourced.EventSourced",
                                "serviceName": "com.example.shoppingcart.ShoppingCart",
                                "persistenceId": "ShoppingCart"
                            }
                        ],
                        "serviceInfo": {
                            "serviceName": "shopping-cart",
                            "serviceVersion": "0.1.0",
                            "serviceRuntime": "go1.14.2 darwin/amd64",
                            "supportLibraryName": "cloudstate-go-support",
                            "supportLibraryVersion": "0.2.0"
                        }
                    },
                    "meta": {
                        "timeout": 15,
                        "maxTimeout": 30,
                        "headers": {
                            "h3": "v3",
                            "h4": "v4",
                            "h5": "TCK2"
                        }
                    }
                }
            },
            {
                "req": {
                    "msg": {
                        "protocolMajorVersion": 0,
                        "protocolMinorVersion": 0,
                        "proxyName": "TCK3",
                        "proxyVersion": "1.1.0",
                        "supportedEntityTypes": [
                            "cloudstate.nonexisting.Model"
                        ]
                    }
                },
                "resp": {
                    "msg": {},
                    "meta": {
                        "timeout": 60,
                        "headers": {
                            "h1": "v1",
                            "h2": "v2"
                        }
                    }
                },
                "stream": {
                    "closed": true,
                    "gRCPErrorCode": "CANCELLED"
                }
            }
        ]
    }
]
